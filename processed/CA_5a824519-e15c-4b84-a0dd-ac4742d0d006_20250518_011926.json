{
  "type": "error",
  "id": "5a824519-e15c-4b84-a0dd-ac4742d0d006",
  "timestamp": "2025-05-18T00:49:10.756949",
  "sender": "CA",
  "recipient": "ARCH",
  "version": "1.0.0",
  "content": {
    "error_code": "INVALID_MESSAGE",
    "message": "Message validation failed: 'version' is a required property\n\nFailed validating 'required' in schema:\n    {'$schema': 'http://json-schema.org/draft-07/schema#',\n     'title': 'Agent Communication Protocol Schema',\n     'description': 'Schema for inter-agent messages in the '\n                    'agent-comms-mvp system',\n     'type': 'object',\n     'required': ['type',\n                  'id',\n                  'timestamp',\n                  'sender',\n                  'recipient',\n                  'content',\n                  'version'],\n     'properties': {'type': {'type': 'string',\n                             'enum': ['task_assignment',\n                                      'task_status',\n                                      'error'],\n                             'description': 'Type of message being sent'},\n                    'id': {'type': 'string',\n                           'format': 'uuid',\n                           'description': 'Unique message identifier (UUID '\n                                          'v4)'},\n                    'timestamp': {'type': 'string',\n                                  'format': 'date-time',\n                                  'description': 'ISO 8601 timestamp of '\n                                                 'message creation'},\n                    'sender': {'type': 'string',\n                               'enum': ['CC', 'CA', 'WA', 'ARCH'],\n                               'description': 'Identifier of the sending '\n                                              'agent'},\n                    'recipient': {'type': 'string',\n                                  'enum': ['CC', 'CA', 'WA', 'ARCH'],\n                                  'description': 'Identifier of the '\n                                                 'receiving agent'},\n                    'content': {'type': 'object',\n                                'description': 'Message content, varies by '\n                                               'type',\n                                'oneOf': [{'if': {'properties': {'type': {'const': 'task_assignment'}}},\n                                           'then': {'properties': {'task_id': {'type': 'string',\n                                                                               'pattern': '^TASK-\\\\d{3}$',\n                                                                               'description': 'Unique '\n                                                                                              'task '\n                                                                                              'identifier'},\n                                                                   'description': {'type': 'string',\n                                                                                   'description': 'Task '\n                                                                                                  'description'},\n                                                                   'priority': {'type': 'integer',\n                                                                                'minimum': 1,\n                                                                                'maximum': 5,\n                                                                                'description': 'Task '\n                                                                                               'priority '\n                                                                                               '(1-5)'},\n                                                                   'deadline': {'type': 'string',\n                                                                                'format': 'date-time',\n                                                                                'description': 'Task '\n                                                                                               'deadline'},\n                                                                   'requirements': {'type': 'array',\n                                                                                    'items': {'type': 'string'},\n                                                                                    'description': 'List '\n                                                                                                   'of '\n                                                                                                   'task '\n                                                                                                   'requirements'}},\n                                                    'required': ['task_id',\n                                                                 'description',\n                                                                 'priority',\n                                                                 'deadline',\n                                                                 'requirements']}},\n                                          {'if': {'properties': {'type': {'const': 'task_status'}}},\n                                           'then': {'properties': {'task_id': {'type': 'string',\n                                                                               'pattern': '^TASK-\\\\d{3}$',\n                                                                               'description': 'Task '\n                                                                                              'identifier'},\n                                                                   'status': {'type': 'string',\n                                                                              'enum': ['pending',\n                                                                                       'in_progress',\n                                                                                       'completed',\n                                                                                       'failed',\n                                                                                       'cancelled'],\n                                                                              'description': 'Current '\n                                                                                             'task '\n                                                                                             'status'},\n                                                                   'progress': {'type': 'integer',\n                                                                                'minimum': 0,\n                                                                                'maximum': 100,\n                                                                                'description': 'Task '\n                                                                                               'completion '\n                                                                                               'percentage'},\n                                                                   'details': {'type': 'string',\n                                                                               'description': 'Additional '\n                                                                                              'status '\n                                                                                              'details'}},\n                                                    'required': ['task_id',\n                                                                 'status',\n                                                                 'progress',\n                                                                 'details']}},\n                                          {'if': {'properties': {'type': {'const': 'error'}}},\n                                           'then': {'properties': {'error_code': {'type': 'string',\n                                                                                  'enum': ['INVALID_MESSAGE',\n                                                                                           'FILE_NOT_FOUND',\n                                                                                           'PROCESSING_ERROR',\n                                                                                           'INVALID_TASK'],\n                                                                                  'description': 'Error '\n                                                                                                 'code '\n                                                                                                 'identifier'},\n                                                                   'message': {'type': 'string',\n                                                                               'description': 'Human-readable '\n                                                                                              'error '\n                                                                                              'message'},\n                                                                   'context': {'type': 'object',\n                                                                               'description': 'Additional '\n                                                                                              'error '\n                                                                                              'context',\n                                                                               'properties': {'task_id': {'type': 'string',\n                                                                                                          'pattern': '^TASK-\\\\d{3}$'},\n                                                                                              'attempted_path': {'type': 'string'}}}},\n                                                    'required': ['error_code',\n                                                                 'message',\n                                                                 'context']}}]},\n                    'version': {'type': 'string',\n                                'pattern': '^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$',\n                                'description': 'Protocol version (e.g., '\n                                               '1.0.0)'},\n                    'metadata': {'type': 'object',\n                                 'description': 'Optional metadata for the '\n                                                'message',\n                                 'properties': {'protocol_version': {'type': 'string',\n                                                                     'pattern': '^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$'}}}}}\n\nOn instance:\n    {'type': 'task_assignment',\n     'id': 'task-001',\n     'timestamp': '2025-05-18T10:00:00Z',\n     'sender': 'ARCH',\n     'recipient': 'CA',\n     'content': {'task_id': 'demo-summary-test',\n                 'description': 'Simulate summary extraction',\n                 'priority': 1,\n                 'deadline': '2025-05-20T00:00:00Z',\n                 'requirements': ['text'],\n                 'handler': 'summary'},\n     'metadata': {'protocol_version': '1.0.0'}}",
    "context": {
      "original_message_id": "task-001"
    }
  },
  "metadata": {
    "protocol_version": "1.0.0"
  }
}